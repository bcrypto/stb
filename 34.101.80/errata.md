# Поправка к официальной редакции

| В каком месте | Напечатано | Должно быть |
|---------------|------------|-------------|
| Раздел 3 | Термины не отсортированы по алфавиту. | Термины отсортированы по алфавиту. |
| Пункт 6.2.5, абзац 4 | В настоящем документе определены следующие общие типы обязательств: | В настоящем стандарте определены следующие общие типы обязательств: |
| Пункт 6.3.1, абзац 2 | | Штампы времени ДОЛЖНЫ выставляться до истечения срока действия или отзыва сертификата подписанта. |
| Пункт 6.4.1, предпоследний абзац | Примечание 1 — Сертификат подписанта указывается в атрибуте `SigningCertificate`. | Примечание 1 — Ссылка на сертификат подписанта указывается в атрибуте `SigningCertificate`. |
| Пункт 6.4.2, абзац 1 | Неподписанный атрибут `CertificateValues` содержит сертификаты, ссылки на которые указаны в атрибутах `CompleteCertificateReferences` и `SigningCertificate`. Другие сертификаты НЕ ДОЛЖНЫ быть указаны в этом атрибуте. | Неподписанный атрибут `CertificateValues` содержит сертификаты из перечня, определенного при описании атрибута `CompleteCertificateReferences`. В список `CertificateValues` включаются сертификаты, не входящие в стандартные списки CAdES (компонент `SignedData.certificates`)  или XAdES (внутри элемента `ds:KeyInfo`). В РЭЦП формата CAdES атрибут `CertificateValues` может также содержать сертификаты, ссылки на которые указаны в атрибутах `AttributeCertificateReferences` и `SigningCertificate`. |
| Пункт 6.4.4, абзац 1 | Неподписанный атрибут `RevocationValues` содержит аттестаты отзыва, ссылки на которые перечислены в атрибуте `CompleteRevocationReferences`. Другие аттестаты отзыва НЕ ДОЛЖНЫ включаться в этот атрибут. | Неподписанный атрибут `RevocationValues` содержит аттестаты отзыва из перечня, определенного при описании атрибута `CompleteRevocationReferences`. В список `RevocationValues` включаются аттестаты отзыва, не входящие в стандартные списки CAdES (компонент `SignedData.crls`) или XAdES (внутри элемента `ds:KeyInfo`). В РЭЦП формата CAdES атрибут `RevocationValues` может также содержать аттестаты, ссылки на которые указаны в атрибуте `AttributeRevocationReferences`. |
| Пункт 6.4.6, абзац 1 | Неподписанный атрибут `AttributeCertificateValues` содержит сертификаты, ссылки на которые указаны в атрибуте `AttributeCertificateReferences`. Другие сертификаты НЕ ДОЛЖНЫ указываться в этом атрибуте. | Неподписанный атрибут `AttributeCertificateValues` содержит сертификаты из перечня, определенного при описании атрибута `AttributeCertificateReferences`. |
| Пункт 6.4.8, абзац 1 | Неподписанный атрибут `AttributeRevocationValues` содержит аттестаты отзыва, ссылки на которые перечислены в атрибуте `AttributeRevocationReferences`. Другие элементы НЕ ДОЛЖНЫ включаться в этот атрибут. | Неподписанный атрибут `AttributeRevocationValues` содержит аттестаты отзыва из перечня, определенного при описании атрибута `AttributeRevocationReferences`. |
| Пункт 6.4.9, абзац 1 | Неподписанный атрибут `SigAndRefsTimeStamp` содержит штамп времени атрибутов, содержащих ссылки на аттестаты отзыва. | Неподписанный атрибут `RefsOnlyTimeStamp` содержит штамп времени атрибутов, содержащих ссылки на аттестаты отзыва. |
| Пункт 7.2, абзац 2 | РЭЦП класса XAdES-B-B ДОЛЖНА содержать следующие атрибуты, специфичные для данного формата:<br>- `DataObjectFormat`. | РЭЦП профиля XAdES-B-B MOЖЕТ содержать следующие атрибуты, специфичные для данного формата:<br>- `DataObjectFormat`.<br>При этом подпись ДОЛЖНА содержать атрибут `DataObjectFormat`, если подпись покрывает объекты неопределенного в настоящем стандарте формата и НЕ ДОЛЖНА, если формат каждого подписанного объекта определен (подписана другая подпись или стандартизированные атрибуты).|
| Пункт 7.2, последний абзац | В РЭЦП класса XAdES-B-B НЕ РЕКОМЕНДУЕТСЯ включать атрибут `RenewedDigest`. | В РЭЦП класса XAdES-B-B НЕ РЕКОМЕНДУЕТСЯ включать атрибут `RenewedDigests`. |
| Пункт 7.5, абзац 2 | РЭЦП профиля B-LTA ДОЛЖНА содержать атрибут `ArchiveTimestamp`. | РЭЦП профиля B-LTA ДОЛЖНА содержать атрибут `ArchiveTimeStamp`. |
| Пункт 8.1.2, абзац 7 | После получения входных данных СВП формирует подписываемые атрибуты (в том числе хэш-значение документа), форматирует их, хэширует. После этого средство ЭЦП вырабатывает базовую подпись полученного хэш-значения... | После получения входных данных СВП формирует подписываемые атрибуты (в том числе хэш-значение документа), форматирует их, хэширует. После этого средство ЭЦП вырабатывает базовую подпись подписываемых атрибутов...<br><br>Примечание — РЭЦП формата XAdES может содержать несколько атрибутов с хэш-значениями отдельных частей одного или даже нескольких документов.|
| Пункт 8.2.1, абзац 7 | Вердикт `INTERMEDIATE` уточняется следующими статусами: | Вердикт `INDETERMINATE` уточняется следующими статусами: |
| Пункт 8.2.1, абзац 7, дефис 10 | Образно- `NO_SIGNING_CERTIFICATE_FOUND` — не найден сертификат подписанта; |- `NO_SIGNING_CERTIFICATE_FOUND` — не найден сертификат подписанта; |
| Пункт 8.2.2.2, шаг 3 | Обработатать результат верификации. | Обработать результат верификации. |
| Пункт 8.2.2.2, шаг 4 | Для каждого сертификата цепочки проверить выполнение ограничений политики применения сертификатов. Если ограничения не выполнены, то зафиксировать цепочку со статусом `CERTIFICATE_CHAIN_GENERAL_FAILURE` и вернуться к шагу 1. | Для каждого сертификата цепочки проверить выполнение ограничений политики применения сертификатов. Если ограничения не выполнены, то зафиксировать цепочку со статусом `CHAIN_CONSTRAINTS_FAILURE` и вернуться к шагу 1. |
| Пункт 8.2.2.2, шаг 5 | Возвратить цепочку со статусом `OK`. | Для каждого сертификата цепочки проверить выполнение криптографических ограничений. Если ограничения не выполнены, то зафиксировать цепочку со статусом `CRYPTO_CONSTRAINTS_FAILURE_NO_POE` и вернуться к шагу 1. |
| Пункт 8.2.2.2, шаг 6 | | Возвратить цепочку со статусом `OK`. |
| Пункт 8.2.2.4, подшаг б) | б) обработать каждый из найденнных аттестатов: | б) обработать каждый из найденных аттестатов: |
| Пункт 8.2.2.5, абзац 1 | - список точек доверия;<br>- аттестаты; | - список точек доверия;<br>- список доказательств существования;<br>- аттестаты; |
| Пункт 8.2.2.6, шаг 3 | Инициализовать пустое множество *P* доказательств существования. | Инициализировать пустой список *P* доказательств существования. |
| Пункт 8.2.2.7, абзац 2 | - политику применения сертификатов (оционально); | - политику применения сертификатов (опционально); |
| Пункт 8.2.2.7, шаг 2 | Если имеется доказательство существования базовой подписи к моменту времени, зафиксированному на шаге 2, то разобрать входной статус следующим образом: | Если имеется доказательство существования базовой подписи к моменту времени, зафиксированному на шаге 1, то разобрать входной статус следующим образом: |
| Пункт 8.2.3, шаг 4, последний абзац | `CRYPTO_CONSTRAINS_FAILURE_NO_POE` | `CRYPTO_CONSTRAINTS_FAILURE_NO_POE` |
| Пункт 8.2.3, шаг 5, подшаг б) | б) сравнить полученное хэш-значение с хэш-значением, указанным в атрибуте `MessageDigest` РЭЦП. Если хэш-значения отличаются, то возвратить `FAILED` и статус `HASH_FAILURE`; | б) определить подписанный атрибут РЭЦП, в котором указано хэш-значение подписанного документа. Сравнить хэш-значение в атрибуте с хэш-значением, полученным на подшаге a). Если атрибут с хэш-значением не найден или хэш-значения отличаются, то возвратить `FAILED` и статус `HASH_FAILURE`;<br><br>Примечание — При обработке РЭЦП формата XAdES проверяется каждый подписанный атрибут с хэш-значением документа или его части. |
| Пункт 8.2.3, шаг 6, абзац 1 | Обработать статус цепочки сертификатов, построенной на шаге 3 следующим образом: | Обработать статус цепочки сертификатов, построенной на шаге 4, следующим образом: |
| Пункт 8.2.3, шаг 7, подшаг а), абзац 1 | а) проверить каждый атрибут, который должен присутствовать в РЭЦП в соответствии с ограничениями, построенными на этапе 3. | а) проверить каждый атрибут, который должен присутствовать в РЭЦП в соответствии с ограничениями, построенными на шаге 3. | 
| Пункт 8.2.3, шаг 7, подшаг а), абзац 2 | | Контрподпись проверяется как РЭЦП. При проверке учитываются ограничения, построенные на шаге 3. Дополнительно проверяется, что подписанные данные контрподписи — это базовая подпись основной РЭЦП. При ошибках во время проверки возвращается `INDETERMINATE` и статус `SIG_CONSTRAINTS_FAILURE`. |
| Пункт 8.2.3, шаг 7, подшаг а), абзац 3 | | Контрподпись проверяется как самостоятельная РЭЦП. В частности, время проверки основной РЭЦП (опциональный входной параметр) не должно учитываться при проверке контрподписи. Однако если имеются ограничения относительно времени выработки контрподписи (например о том, что контрподпись должна вырабатываться в течение определенного срока после выработки основной РЭЦП), то они должны учитываться. |
| Пункт 8.2.3, шаг 7, подшаг а), абзац 4 | | Если ограничения, построенные на шаге 3, не касаются контрподписей, то контрподписи могут не проверяться. Если контроподпись все-таки проверяется и проверка завершается с ошибкой, то эта ошибка может игнорироваться и, таким образом, не влиять на результат проверки основной РЭЦП; |
| Пункт 8.2.3, шаг 7, подшаг б) | б) проверить, что все криптографические алгоритмы, использованные в РЭЦП и в цепочке сертификатов, построенной на шаге 3, сохраняют стойкость в момент проверки. | б) проверить, что все криптографические алгоритмы, использованные в РЭЦП (в том числе в атрибутах и аттестатах), сохраняют стойкость в момент проверки. |
| Пункт 8.2.3, шаг 7, последний абзац | `CRYPTO_CONSTRAINS_FAILURE_NO_POE` | `CRYPTO_CONSTRAINTS_FAILURE_NO_POE` |
| Пункт 8.2.3, шаг 8, абзац 1 | Возвратить `PASSED` вместе с цепочкой сертификатов, полученной на шаге 3. | Возвратить `PASSED` вместе с цепочкой сертификатов, полученной на шаге 4. |
| Пункт 8.2.4, шаг 1, абзац 2 | Инициализровать переменную `best-signature-time` предполагаемым временем выработки подписи. | Инициализировать переменную `best-signature-time` предполагаемым временем выработки подписи. |
| Пункт 8.2.5, шаг 2, абзац 2 | Обработатать результат работы алгоритма следующим образом: | Обработать результат работы алгоритма следующим образом: |
| Пункт 9.2.4, предпоследний абзац | Значение `issuerAndSerialNumber` в компоненте `SignerIdentifier` типа `SignerInfo` и компоненте `issuerSerial` типа `ESSCertID` или `ESSCertIDv2` ДОЛЖНЫ совпадать при их наличии. | В типах `ESSCertID` и `ESSCertIDv2` компонент `issuerSerial` не является точной ссылкой на сертификат, а только подсказкой для его определения. Точной ссылкой является хэш-значение, заданное в компоненте `certHash`.|
| Пункт 9.2.6, последний абзац | - компонент `contentDescription` должен использоваться для указания кодировки данных в соответствии с правилами, определенными в [[16]](99Biblio.md#MIME). | - компонент `contentDescription` должен использоваться для указания MIME-типа данных, определенного в соответствии с правилами документа [[16]](99Biblio.md#MIME). |
| Пункт 9.2.7, предпоследний абзац | Значение атрибута должно формироваться по правилам, определеным в [[16]](99Biblio.md#MIME). | Значение атрибута должно формироваться по правилам, определенным в [[16]](99Biblio.md#MIME). |
| Пункт 9.2.8, абзац 4 | `postalAdddress` | `postalAddress` |
| Пункт 9.2.12, абзац 5 | Компонент `sigPolicyHash` может содержать идентификатор алгоритма хэширования и хэш-значение пилитики подписи. | Компонент `sigPolicyHash` содержит идентификатор алгоритма хэширования и хэш-значение политики подписи. |
| Пункт 9.2.12, абзац 6 | идетнификатор которого указан в компоненте `sigPolicyHash`. | идентификатор которого указан в компоненте `sigPolicyHash`. |
| Пункт 9.2.12, последний абзац | `noticeRefNoticeReference OPTIONAL,`<br>`noticeNumbersSEQUENCE OF INTEGER`<br>`visibleStringVisibleString (SIZE (1..200)),`<br>`bmpStringBMPString (SIZE (1..200)),` |`noticeRef NoticeReference OPTIONAL,`<br>`noticeNumbers SEQUENCE OF INTEGER`<br>`visibleString VisibleString (SIZE (1..200)),`<br>`bmpString BMPString (SIZE (1..200)),`|
| Пункт 9.3.1, абзац 7 | Штампы времени должны выставляться до истечения срока действия или отзыва сертификата подписанта. | |
| Пункт 9.5.1, абзац 1 | Атрибуту назначается следующий идентификатор:<br>`id-aa-ATSHashIndex-v2 OBJECT IDENTIFIER ::= { itu-t(0) identified-organization(4) etsi(0) cades(19122) attributes(1) 4 }` | Атрибуту назначается следующий идентификатор:<br>`id-aa-ATSHashIndex-v3 OBJECT IDENTIFIER ::= { itu-t(0) identified-organization(4) etsi(0) cades(19122) attributes(1) 5 }` |
| Пункт 9.5.1, абзац 2 | Синтаксис атрибута описывается типом `ATSHashIndexV2`:<br>`ATSHashIndexV2 ::= SEQUENCE {`<br>`...`<br>`unsignedAttrsHashIndex SEQUENCE OF OCTET STRING }` | Синтаксис атрибута описывается типом `ATSHashIndexV3`:<br>`ATSHashIndexV3 ::= SEQUENCE {`<br>`...`<br>`unsignedAttrValuesHashIndex SEQUENCE OF OCTET STRING }` |
| Пункт 9.5.1, абзац 4 | Компонент `hashIndAlgorithm` содержит идентификатор алгоритма хэширования, используемого для вычисления хэш-значений, содержащихся в компонентах `certificatesHashIndex`, `crlsHashIndex`, `unsignedAttrsHashIndex`. | Компонент `hashIndAlgorithm` содержит идентификатор алгоритма хэширования, используемого для вычисления хэш-значений, содержащихся в компонентах `certificatesHashIndex`, `crlsHashIndex`, `unsignedAttrValuesHashIndex`. |
| Пункт 9.5.1, абзац 7 | Компонент `unsignedAttrsHashIndex` содержит список хэш-значений, вычисленных от элементов типа `Attribute`, содержащихся в компонентах `unsignedAttrs` всех объектов типа `SignerInfo` на момент выработки штампа времени `ArchiveTimeStamp`. Другие хэш-значения не могут содержаться в списке `unsignedAttrsHashIndex`. | Компонент `unsignedAttrValuesHashIndex` содержит список хэш-значений, вычисленных от элементов типа `Attribute`, содержащихся в компонентах `unsignedAttrs` всех объектов типа `SignerInfo` на момент выработки штампа времени `ArchiveTimeStamp`. Для каждого элемента `Attribute` и для каждого значения в его компоненте `Attribute.attrValues` это значение предваряется значением `Attribute.attrType` и хэшируется. Другие хэш-значения не могут содержаться в списке `unsignedAttrValuesHashIndex`. При обработке списка проверяется, что он содержит хэш-значения всех пар (`Attribute.attrType`, значение в `Attribute.attrValues`) и только эти хэш-значения. |
| Пункт 9.5.2, абзац 1 | Атрибуту назначается следующий идентификатор:<br>`id-aa-ets-archiveTimestampV2 OBJECT IDENTIFIER ::= { itu-t(0) identified-organization(4) etsi(0) electronic-signature-standard(1733) attributes(2) 4 }` | Атрибуту назначается следующий идентификатор:<br>`id-aa-ets-archiveTimestampV3 OBJECT IDENTIFIER ::= { itu-t(0) identified-organization(4) etsi(0) electronic-signature-standard(1733) attributes(2) 4 }` |
| Пункт 9.5.2, пункт 4 перечисления | 4. Единственный элемент типа `ATSHashIndexV2`, содержащийся в атрибуте `TimeStampValidationData`. | 4. Единственный элемент типа `ATSHashIndexV3`, содержащийся в атрибуте `TimeStampValidationData`. |
| Пункт 10.2.4, предпоследний абзац | Вложенные элементы-атрибуты описываются в [10.5](#Xades5). Элемент `SignerRole` является устаревшим и НЕ ДОЛЖЕН включаться в контейнер. | Вложенные элементы-атрибуты описываются в [10.5](#Xades5). Элементы `SignatureProductionPlace` и `SignerRole` являются устаревшими, приводятся только для справки и НЕ ДОЛЖНЫ включаться в контейнер. |
| Пункт 10.2.5, абзац 3 | `<xsd:element ref="CommitmentTypeIndication" minOccurs="0" maxOccurs="unbounded"/>` | `<xsd:element ref="CommitmentTypeIndication" minOccurs="0"/>` |
| Пункт 10.4.2, перечисление, дефис 2 | Если идентификатор закодирован как URN, то XML-атрибут `Qualifier` ДОЛЖЕН принимать значение "OIDAsURN". | Если идентификатор закодирован как URN, то XML-атрибут `Qualifier` ДОЛЖЕН принимать значение "OIDAsURN" и ДОЛЖНЫ использоваться правила кодирования, установленные в [[20]](99Biblio.md#URN). |
| Пункт 10.5.10, абзац 3 | Элемент `SignaturePolicyDocument` содержит описание политики подписи, закодированное по правилам Base64. | Элемент `SignaturePolicyDocument` содержит документ, определяющий политику подписи. Документ кодируется по правилам Base64. |
| Пункт 10.5.10, абзац 4 | Элемент `SigPolDocLocalURI` содержит URI-идентификатор, который ссылается на локальное хранилище, в котором размещено описание политики подписи. | Элемент `SigPolDocLocalURI` содержит URI-идентификатор, который ссылается на локальное хранилище, в котором размещен документ с политикой подписи. |
| Пункт 10.5.7.2, последний абзац | | Элемент `CounterSignature` дополнительно к ссылке на элемент `ds:SignatureValue` РЭЦП может содержать ссылки на другие объекты, например, на элементы `ds:SignatureValue` других контрподписей, включенных в РЭЦП. |
| Пункт 10.5.9.1, последний абзац | Элемент `SigPolicyHash` содержит идентификатор алгоритма хэширования и хэш-значение, полученное после обработки `SigPolicyId` и `ds:Transforms`, если таковые присутствуют. | Элемент `SigPolicyHash` содержит идентификатор алгоритма хэширования и хэш-значение, полученное после обработки элементов `SigPolicyId` и, если присутствует, `ds:Transforms`. |
| Пункт 10.5.9.1, абзац 4 | Элемент `SignaturePolicyId` используется для ссылки на политику подписи в явном виде. | Элемент `SignaturePolicyId` используется для ссылки на политику подписи в явном виде. Пустой элемент `SignaturePolicyImplied` используется для неявной ссылки на политику подписи. Элемент указывает на то, что подписанные данные и другие внешние объекты подразумевают определенную политику подписи. |
| Пункт 10.5.10, последний абзац | Атрибут `SignaturePolicyStore` может содержаться в подписи только в паре с атрибутом `SignaturePolicyIdentifier`, который содержит хэш-значение описания политики подписи в элементе `SigPolicyHash`. В противном случае атрибут `SignaturePolicyStore` НЕ ДОЛЖЕН включаться в подпись. | Атрибут `SignaturePolicyStore` может включаться в подпись, только если включен атрибут `SignaturePolicyIdentifier` и в его элементе `SigPolicyHash` указано хэш-значение документа с политикой подписи. Если условия не выполнены, то атрибут `SignaturePolicyStore` НЕ ДОЛЖЕН включаться в подпись. |
| Пункт 10.7.7, предпоследний абзац | Элемент `EncapsulatedX509Certificate` содержит СОК в формате, определеннном в СТБ 34.101.19. | Элемент `EncapsulatedX509Certificate` содержит СОК в формате, определенном в СТБ 34.101.19. |
| Пункт 10.7.8, предпоследний абзац | Каждый вложенный в `CRLValues` элемент `EncapsulatedOCSPValue` содержит отдельный OCSP-ответ. | Каждый вложенный в `OCSPValues` элемент `EncapsulatedOCSPValue` содержит отдельный OCSP-ответ. | 
| Пункт 10.8.1, последний абзац |`AllDataObjectTimeStamp`|`AllDataObjectsTimeStamp`|
| Пункт 10.8.2, абзац 4 | `<xsd:element name="ArchiveTimeStamp" type="xades:XAdESTimeStampType"/>` | `<xsd:element name="ArchiveTimeStamp" type="XAdESTimeStampType"/>` |
| Пункт 10.9, абзац 2 |- элемент `ds:Reference`(более двух экземпляр).|- элемент `ds:Reference` (не менее двух экземпляров).|
| Пункт 10.9, абзац 8 | Если трансформация, заданная атрибутом `Transform`, не является канонизацией, то XML-атрибут `Algorithm` элемента `ds:Reference/ds:Transforms` ДОЛЖЕН принимать одно из следующих значений: | Если трансформация, заданная атрибутом `Transform`, не является канонизацией, то в XML-атрибуте `Algorithm` элемента `ds:Reference/ds:Transforms` РЕКОМЕНДУЕТСЯ задавать одно из следующих значений:|
| Пункт 11.2.1, таблица 1, строка Prop_Build | Информация о состоянии системы во время подписания, например идентификатор обработчика подписи, версия програмного обеспечения, операционная система | Информация о состоянии системы во время подписания, например идентификатор обработчика подписи, версия программного обеспечения, операционная система |
| Пункт 11.3.1, абзац 1 | Расширение фиксируется добавлением в словарь `extensions` следущего элемента: | Для указания на расширение в словарь `extensions` СЛЕДУЕТ добавить следующий элемент: |
| Пункт 11.3.5.1, предпоследний абзац | Для указания на использование расширений DSS и DTS в словарь `extensions` (см. 11.2.3) необходимо добавить следущий элемент: | Для указания на использование расширений DSS и DTS в словарь `extensions` (см. 11.3.1) СЛЕДУЕТ добавить следующий элемент: |
| Пункт A.2.1, абзац 1 | Профили E-BES и E-PES уточняют профиль B-B в следующих аспектах. | Профили E-BES и E-EPES уточняют профиль B-B в следующих аспектах. |
| Пункт A.2.1, абзац 2 | В РЭЦП профиля E-BES или E-PES МОЖЕТ содержаться атрибут `SigningTime`. | В РЭЦП профиля E-BES или E-EPES МОЖЕТ содержаться атрибут `SigningTime`.|
| Пункт A.2.1, абзац 4 | Включение атрибута `SignaturePolicyIdentifier`, возможно только при условии, что атрибут `SignaturePolicyIdentifier` содержит хэш-значение от документа регламента подписи. | Включение атрибута `SignaturePolicyStore` возможно только при условии, что атрибут `SignaturePolicyIdentifier` содержит хэш-значение от документа регламента подписи. |
| Библиография, источник 18 | International Organization for Standartization | International Organization for Standardization |
